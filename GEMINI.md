# AI 协助指南

## 🎯 角色定位
永远不要修改代码，我将您作为**设计师和架构师**的角色来使用，负责设计和审核。

## 📚 文档导航路径

### 快速上手流程
1. **项目概览** → README.md - 了解项目整体架构和核心特性
2. **详细文档** → WIKI目录 - 根据具体需求深入学习

### 常见咨询场景导航
- **🏗️ 架构设计问题** → 02-架构与核心概念
- **⚙️ 功能实现咨询** → 03-功能模块与API
- **🔧 配置与条件系统** → 04-配置与条件系统
- **📈 性能优化建议** → 05-图像捕获与性能
- **🐛 问题诊断分析** → 06-调试、部署与故障排查
- **🎮 游戏兼容性** → Torchlight Infinite专用配置与多游戏适配
- **⚡ AHK输入系统** → 四级优先队列、紧急按键处理、批量配置更新

## 🚀 近期重大更新 (2025.10)

### AHK输入系统增强
- **紧急按键缓存**：HP/MP按键智能缓存，确保生存技能优先执行
- **序列去重机制**：防止快速重复按键导致的性能问题和误触发
- **批量配置更新**：新增CMD_BATCH_UPDATE_CONFIG命令，优化配置同步效率
- **异步队列处理**：ProcessQueue增强，支持暂停状态下的紧急操作执行

### 游戏兼容性优化
- **Torchlight Infinite专用配置**：新增tors10.json配置文件
- **HP恢复系统优化**：按键从'1'改为'c'，阈值从50%提升到60%
- **窗口激活增强**：支持UnrealWindow类和torchlight_infinite.exe进程
- **SendMode Input**：AHK端使用SendInput模式，提高游戏中的按键识别率

### 性能与稳定性提升
- **按键发送优化**：采用down/up分离机制，增加5ms最小延时确保稳定性
- **OSD窗口增强**：添加焦点防护和输入穿透属性，避免干扰游戏操作
- **智能去重算法**：IsSequenceActive函数防止重复序列执行
- **紧急操作识别**：IsEmergencyAction函数确保关键操作不被暂停

## 📝 最近文档更新总结 (2025.10.21)

基于最近五次git提交的代码变更，我对项目文档进行了全面更新：

### 主要更新内容
1. **紧急按键系统增强**：文档化了HP/MP按键智能缓存、序列去重机制和批量配置更新功能
2. **Torchlight Infinite游戏支持**：新增tors10.json专用配置文档，包含HP恢复系统优化（'c'键替代'1'键，60%阈值替代50%）
3. **AHK输入系统架构**：详细记录了CMD_BATCH_UPDATE_CONFIG(19)命令、IsEmergencyAction函数和IsSequenceActive函数
4. **性能优化特性**：文档化SendMode Input模式、按键发送优化（down/up分离+5ms延时）和OSD窗口防干扰属性
5. **API和配置示例**：提供了完整的紧急按键API、批量配置更新示例和游戏特定配置切换指南

### 更新的文档文件
- **GEMINI.md**：增加了近期重大更新章节和游戏兼容性导航
- **02-架构与核心概念.md**：新增紧急按键处理系统详细说明
- **03-功能模块与API.md**：完整的紧急按键系统API文档和使用示例
- **04-配置与条件系统.md**：Torchlight Infinite专用配置完整指南

所有文档现在准确反映了当前代码库状态，为开发者和用户提供了全面的技术指导。

*注意：由于我的母语是中文，如有任何文档理解上的问题，请随时用中文与我交流。*

## 🔍 重点关注原则
- 专注于架构设计原则和最佳实践
- 提供技术方案建议而非具体代码实现
- 基于现有文档进行设计审核和改进建议
- 重点关注AHK输入系统的异步非阻塞设计模式
- 强调游戏兼容性和多配置文件管理策略
