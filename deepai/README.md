# DeepAI CNN è®­ç»ƒæ–¹æ¡ˆå®Œæ•´æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–¹æ¡ˆæä¾›**ä¸‰ç§**æ•°å­—è¯†åˆ«å¼•æ“ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·éœ€æ±‚ï¼š

### ğŸ¯ ä¸‰ç§è¯†åˆ«å¼•æ“

| å¼•æ“                 | é€Ÿåº¦  | å‡†ç¡®ç‡  | ä¾èµ–       | éœ€è¦è®­ç»ƒ | é€‚ç”¨åœºæ™¯                 |
| -------------------- | ----- | ------- | ---------- | -------- | ------------------------ |
| **1ï¸âƒ£ æ¨¡æ¿åŒ¹é…**      | ~7ms  | 90-95%  | æ—          | âœ… æ˜¯    | æ¨èï¼Œæœ€å¿«ï¼Œæ— é¢å¤–ä¾èµ– ğŸš€ |
| **2ï¸âƒ£ Keras æ¨¡å‹**    | ~47ms | >99%    | TensorFlow | âœ… æ˜¯    | æœ€é«˜å‡†ç¡®ç‡               |
| **3ï¸âƒ£ Tesseract OCR** | ~240ms | 95-100% | Tesseract  | âŒ å¦    | é€šç”¨æ€§å¼ºï¼Œç¨³å®šå¯é        |

**ä¸€æ¬¡è®­ç»ƒï¼Œè·å¾—ä¸¤ç§é«˜æ€§èƒ½å¼•æ“ï¼**

- è®­ç»ƒè¿‡ç¨‹ä¼šè‡ªåŠ¨ç”Ÿæˆï¼šæ•°å­—æ¨¡æ¿ + Keras æ¨¡å‹
- ç”¨æˆ·å¯æ ¹æ®éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„å¼•æ“

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ Aï¼šTesseract OCRï¼ˆé»˜è®¤ï¼Œæ¨èæ–°æ‰‹ï¼‰

1. ç¡®ä¿å·²å®‰è£… Tesseract
2. åœ¨ä¸»ç¨‹åº UI ä¸­é€‰æ‹© "Tesseract" å¼•æ“
3. ç›´æ¥ä½¿ç”¨ï¼

### æ–¹å¼ Bï¼šä½¿ç”¨ Keras æ¨¡å‹ï¼ˆé«˜æ€§èƒ½ï¼‰

1. å®‰è£…ä¾èµ–: `pip install -r deepai/requirements.txt`
2. åœ¨ä¸»ç¨‹åº UI ä¸­é€‰æ‹© "Keras" å¼•æ“
3. ç›´æ¥ä½¿ç”¨ï¼ˆå¦‚æœé¡¹ç›®åŒ…å«é¢„è®­ç»ƒæ¨¡å‹ï¼‰æˆ–è¿è¡Œè®­ç»ƒæµç¨‹

---

## ğŸ“¦ å®‰è£…æŒ‡å—

### å®Œæ•´å®‰è£…ï¼ˆæ¨èï¼‰

```bash
pip install -r deepai/requirements.txt
```

**åŒ…å«**ï¼š

- âœ… TensorFlow CPU ç‰ˆæœ¬ï¼ˆè½»é‡çº§ï¼Œæ— éœ€ GPUï¼‰
- âœ… NumPyï¼ˆæ•°æ®å¤„ç†ï¼‰
- âœ… OpenCVï¼ˆå›¾åƒå¤„ç†ï¼‰
- âœ… scikit-learnï¼ˆæœºå™¨å­¦ä¹ å·¥å…·ï¼‰
- âœ… matplotlibï¼ˆåŸºç¡€å¯è§†åŒ–ï¼‰
- âœ… seabornï¼ˆé«˜çº§å¯è§†åŒ–ï¼Œå¯é€‰ï¼‰
- âœ… Pillowï¼ˆGUI å·¥å…·ï¼‰
- âœ… pytesseractï¼ˆOCR è‡ªåŠ¨æ ‡æ³¨ï¼‰

### æœ€å°å®‰è£…

```bash
pip install tensorflow numpy opencv-python scikit-learn matplotlib Pillow pytesseract
```

### ä¾èµ–æ£€æŸ¥

```bash
python -c "import sys; deps = {'tensorflow': 'TensorFlow', 'numpy': 'NumPy', 'cv2': 'OpenCV', 'sklearn': 'scikit-learn', 'matplotlib': 'Matplotlib', 'PIL': 'Pillow', 'pytesseract': 'pytesseract'}; print('æ ¸å¿ƒä¾èµ–:'); [print(f'  âœ… {name}') if __import__(module) or True else print(f'  âŒ {name} - æœªå®‰è£…') for module, name in deps.items()]"
```

---

## ğŸ“ è¿­ä»£å¼è®­ç»ƒæµç¨‹

### ä¸»æ§è„šæœ¬

```bash
python deepai/scripts/00_iterative_labeling.py
```

### èœå•é€‰é¡¹

```
--- è¿­ä»£å¼AIè®­ç»ƒå·¥ä½œæµ ---
1a. ä»è§†é¢‘ç”Ÿæˆæ•°å­—å›¾åƒ (æå–å¸§ â†’ è£å‰ª â†’ åˆ†å‰²)
1b. Tesseractè‡ªåŠ¨æ ‡æ³¨ (å¯¹ç”Ÿæˆçš„å›¾åƒè¿›è¡Œåˆå§‹æ ‡æ³¨)
2.  äººå·¥éªŒè¯æ ‡æ³¨ (æ ¸å¿ƒæ­¥éª¤ï¼Œæå‡æ¨¡å‹ç²¾åº¦)
3.  è®­ç»ƒæ¨¡å‹ (å½“æœ‰è¶³å¤Ÿå·²éªŒè¯çš„æ ‡æ³¨æ—¶)
4.  æ¨¡å‹è¾…åŠ©æ ‡æ³¨ (ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹åŠ é€Ÿæ ‡æ³¨)
5.  è¯„ä¼°æ¨¡å‹ (æŸ¥çœ‹æ¨¡å‹æ€§èƒ½å’Œå‡†ç¡®ç‡)
6.  ç”Ÿæˆæœ€ç»ˆäº§ç‰© (è¯„ä¼°æ¨¡å‹ + ç”Ÿæˆæ¨¡æ¿)
0.  é€€å‡º
```

### å…¸å‹å·¥ä½œæµç¨‹

#### é¦–æ¬¡è®­ç»ƒ

```
1a â†’ 1b â†’ 2 â†’ 3 â†’ 5
```

#### è¿­ä»£ä¼˜åŒ–

```
4 â†’ 2 â†’ 3 â†’ 5 (é‡å¤2-3æ¬¡)
```

#### æœ€ç»ˆå®Œæˆ

```
5 â†’ 6
```

---

## ğŸ“ è¯¦ç»†æ­¥éª¤è¯´æ˜

### æ­¥éª¤ 1aï¼šä»è§†é¢‘ç”Ÿæˆæ•°å­—å›¾åƒ

**åŠŸèƒ½**ï¼š

- ä»è§†é¢‘æå–å¸§ â†’ `deepai/data/processed/frames/`
- è£å‰ª HP/MP åŒºåŸŸ â†’ `deepai/data/processed/hp/` å’Œ `mp/`
- åˆ†å‰²å•ä¸ªæ•°å­— â†’ `deepai/data/digits/`

**æ™ºèƒ½é‡‡æ ·**ï¼š

- HP åŒºåŸŸé‡‡æ ·ç‡ï¼š10%ï¼ˆHP å˜åŒ–æ…¢ï¼Œåªéœ€å°‘é‡æ ·æœ¬ï¼‰
- MP åŒºåŸŸé‡‡æ ·ç‡ï¼š100%ï¼ˆMP å˜åŒ–å¿«ï¼Œéœ€è¦æ›´å¤šæ ·æœ¬ï¼‰
- è‡ªåŠ¨å»é™¤é€—å·å™ªç‚¹ï¼ˆä½¿ç”¨å¼€è¿ç®—ï¼‰

**ä½•æ—¶ä½¿ç”¨**ï¼š

- é¦–æ¬¡è¿è¡Œ
- å¢åŠ æ–°è§†é¢‘æ•°æ®

**è¾“å‡º**ï¼š

- æ•°å­—å›¾åƒæ–‡ä»¶
- æœªæ ‡æ³¨çš„ `labels.json`

### æ­¥éª¤ 1bï¼šTesseract è‡ªåŠ¨æ ‡æ³¨

**åŠŸèƒ½**ï¼š

- ä½¿ç”¨ Tesseract å¯¹æ•°å­—å›¾åƒè¿›è¡Œè‡ªåŠ¨æ ‡æ³¨
- è¾“å‡ºæ¯ä¸ªæ ·æœ¬çš„è¯†åˆ«ç»“æœ

**è¾“å‡ºæ ¼å¼**ï¼š

```
  [   1/1932] âœ“ hp_000000_digit_0.png â†’ '1' (95.2%)
  [   2/1932] ? hp_000000_digit_1.png â†’ '2' (78.5%)
  [   3/1932] âœ— hp_000000_digit_2.png â†’ (è¯†åˆ«å¤±è´¥)
```

**çŠ¶æ€ç¬¦å·**ï¼š

- `âœ“` - é«˜ç½®ä¿¡åº¦ï¼ˆâ‰¥ 90%ï¼‰
- `?` - ä½ç½®ä¿¡åº¦ï¼ˆ< 90%ï¼‰ï¼Œéœ€è¦éªŒè¯
- `âœ—` - è¯†åˆ«å¤±è´¥

**ä½•æ—¶ä½¿ç”¨**ï¼š

- åœ¨æ­¥éª¤ 1a ä¹‹å
- é‡æ–°æ ‡æ³¨æ‰€æœ‰æ ·æœ¬

**å‡†ç¡®ç‡**ï¼š70-85%

### æ­¥éª¤ 2ï¼šäººå·¥éªŒè¯æ ‡æ³¨

**æ ¸å¿ƒåŸåˆ™**ï¼šåªéªŒè¯ Tesseract è¯†åˆ«å¤±è´¥æˆ–ä½ç½®ä¿¡åº¦çš„æ ·æœ¬ï¼Œé«˜ç½®ä¿¡åº¦æ ·æœ¬è‡ªåŠ¨é€šè¿‡ã€‚

**å·¥ä½œæ¨¡å¼**ï¼š

- âœ… é«˜ç½®ä¿¡åº¦æ ·æœ¬ï¼ˆâ‰¥ 90%ï¼‰- è‡ªåŠ¨æ ‡è®°ä¸ºå·²éªŒè¯ï¼ˆæ— éœ€äººå·¥æ£€æŸ¥ï¼‰
- âš ï¸ ä½ç½®ä¿¡åº¦æ ·æœ¬ï¼ˆ< 90%ï¼‰- éœ€è¦äººå·¥éªŒè¯
- âœ— è¯†åˆ«å¤±è´¥æ ·æœ¬ - éœ€è¦äººå·¥æ ‡æ³¨

**GUI å¿«æ·é”®**ï¼š

- **0-9, /** : å¿«é€Ÿæ ‡æ³¨ï¼ˆè‡ªåŠ¨ä¿å­˜å¹¶è·³åˆ°ä¸‹ä¸€ä¸ªï¼‰
- **Enter/â†’** : ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª
- **â†** : ä¸Šä¸€ä¸ª
- **Space** : è·³è¿‡
- **Delete** : åˆ é™¤
- **Ctrl+S** : ä¿å­˜é€€å‡º

**æ•ˆç‡æå‡**ï¼š

- ç¬¬ 1 è½®ï¼šåªéœ€éªŒè¯ ~15-30% çš„æ ·æœ¬
- ç¬¬ 2 è½®ï¼šåªéœ€éªŒè¯ ~5-10% çš„æ ·æœ¬
- ç¬¬ 3 è½®ï¼šåªéœ€éªŒè¯ ~1-2% çš„æ ·æœ¬

### æ­¥éª¤ 3ï¼šè®­ç»ƒæ¨¡å‹

**åŠŸèƒ½**ï¼š

- ä½¿ç”¨å·²éªŒè¯çš„æ•°æ®è®­ç»ƒ CNN æ¨¡å‹
- ä¿å­˜æ¨¡å‹åˆ° `deepai/models/digit_cnn.keras`
- æ”¯æŒ Keras 3.x
- ä¸­æ–‡å­—ä½“æ”¯æŒ

**è®­ç»ƒå‚æ•°**ï¼ˆåœ¨ `config.py` ä¸­é…ç½®ï¼‰ï¼š

- æ‰¹æ¬¡å¤§å°ï¼š32
- è®­ç»ƒè½®æ•°ï¼š20
- å­¦ä¹ ç‡ï¼š0.001
- éªŒè¯é›†æ¯”ä¾‹ï¼š20%
- å›¾åƒå°ºå¯¸ï¼š28x28
- ç±»åˆ«æ•°é‡ï¼š11ï¼ˆ0-9 + /ï¼‰

**ä½•æ—¶ä½¿ç”¨**ï¼š

- æœ‰è¶³å¤Ÿå·²éªŒè¯çš„æ ·æœ¬ï¼ˆå»ºè®® > 500ï¼‰
- æ¯æ¬¡è¿­ä»£å

**è¾“å‡º**ï¼š

- è®­ç»ƒå¥½çš„æ¨¡å‹ `digit_cnn.keras`
- è®­ç»ƒå†å²å›¾è¡¨ `training_history.png`
- æ ‡ç­¾æ˜ å°„ `label_map.json`

### æ­¥éª¤ 4ï¼šæ¨¡å‹è¾…åŠ©æ ‡æ³¨

**åŠŸèƒ½**ï¼š

- ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹é‡æ–°æ ‡æ³¨æœªéªŒè¯çš„æ ·æœ¬
- è‡ªåŠ¨é‡æ–°åŠ è½½æœ€æ–°æ¨¡å‹
- è¾“å‡ºæ¯ä¸ªæ ·æœ¬çš„è¯†åˆ«ç»“æœ

**è¾“å‡ºæ ¼å¼**ï¼š

```
  [   1/1932] âœ“ hp_000000_digit_0.png â†’ '1' (99.8%)
  [   2/1932] ? mp_000000_digit_0.png â†’ '5' (92.5%)
  [   3/1932] âœ— mp_000000_digit_1.png â†’ (åŠ è½½å¤±è´¥)
```

**ä½•æ—¶ä½¿ç”¨**ï¼š

- åœ¨æ­¥éª¤ 3 ä¹‹å
- è¿­ä»£ä¼˜åŒ–æ—¶

**å‡†ç¡®ç‡**ï¼š95-99%

### æ­¥éª¤ 5ï¼šè¯„ä¼°æ¨¡å‹

**åŠŸèƒ½**ï¼š

- è¯„ä¼°æ¨¡å‹æ€§èƒ½
- ç”Ÿæˆæ··æ·†çŸ©é˜µ
- åˆ†æé”™è¯¯æ ·æœ¬
- æµ‹è¯•æ¨ç†é€Ÿåº¦
- è¾“å‡ºæ¸…æ™°çš„è¯„ä¼°ç»“è®º

**è¯„ä¼°ç»“è®ºç¤ºä¾‹**ï¼š

```
================================================================================
ğŸ“Š è¯„ä¼°ç»“è®º
================================================================================
ğŸ¯ æ¨¡å‹æ€§èƒ½:
   å‡†ç¡®ç‡: 98.86%
   æµ‹è¯•æ ·æœ¬æ•°: 1932
   æ­£ç¡®è¯†åˆ«: 1910
   é”™è¯¯è¯†åˆ«: 22

âš¡ æ¨ç†é€Ÿåº¦:
   å•ä¸ªå­—ç¬¦: ~15.23 ms
   å®Œæ•´HP/MP (5ä¸ªå­—ç¬¦): ~76.15 ms

ğŸ“ˆ è¯„ä¼°ç­‰çº§: âœ… è‰¯å¥½
   æ¨¡å‹è¡¨ç°è‰¯å¥½ï¼Œå»ºè®®ç»§ç»­ä¼˜åŒ–ã€‚

ä¸‹ä¸€æ­¥:
  âœ… æ¨¡å‹å·²è¾¾åˆ°å¯ç”¨æ ‡å‡†ï¼Œå¯ä»¥é›†æˆåˆ°åº”ç”¨ä¸­
  âœ… åœ¨ä¸»ç¨‹åºUIä¸­é€‰æ‹© 'Keras' å¼•æ“
================================================================================
```

**è¯„ä¼°ç­‰çº§**ï¼š

- ğŸŒŸ ä¼˜ç§€ï¼ˆâ‰¥ 99%ï¼‰ï¼šå¯ä»¥æŠ•å…¥ä½¿ç”¨
- âœ… è‰¯å¥½ï¼ˆ95-99%ï¼‰ï¼šå¯ä»¥ä½¿ç”¨ï¼Œå»ºè®®ç»§ç»­ä¼˜åŒ–
- âš ï¸ ä¸€èˆ¬ï¼ˆ90-95%ï¼‰ï¼šéœ€è¦æ›´å¤šè®­ç»ƒ
- âŒ è¾ƒå·®ï¼ˆ< 90%ï¼‰ï¼šéœ€è¦é‡æ–°è®­ç»ƒ

**ä½•æ—¶ä½¿ç”¨**ï¼š

- åœ¨æ­¥éª¤ 3 ä¹‹å
- æƒ³äº†è§£æ¨¡å‹æ€§èƒ½æ—¶
- å†³å®šæ˜¯å¦ç»§ç»­è®­ç»ƒæ—¶

**è¾“å‡º**ï¼š

- å‡†ç¡®ç‡ã€é€Ÿåº¦ç­‰æŒ‡æ ‡
- æ··æ·†çŸ©é˜µå›¾ç‰‡ `confusion_matrix.png`
- é”™è¯¯æ ·æœ¬å›¾ç‰‡ï¼ˆä¿å­˜åœ¨ `models/errors/`ï¼‰
- è¯„ä¼°ç­‰çº§å’Œå»ºè®®

### æ­¥éª¤ 6ï¼šç”Ÿæˆæœ€ç»ˆäº§ç‰©

**åŠŸèƒ½**ï¼š

- è¿è¡Œæ­¥éª¤ 5ï¼ˆè¯„ä¼°æ¨¡å‹ï¼‰
- ç”Ÿæˆæ•°å­—æ¨¡æ¿åˆ° `game_char_templates/hp_mp_digits/`

**ä½•æ—¶ä½¿ç”¨**ï¼š

- è®­ç»ƒå®Œæˆï¼Œå‡†å¤‡æŠ•å…¥ä½¿ç”¨
- ç”Ÿæˆæ‰€æœ‰æœ€ç»ˆæ–‡ä»¶

**è¾“å‡º**ï¼š

- è¯„ä¼°æŠ¥å‘Š
- æ•°å­—æ¨¡æ¿ï¼ˆæ¯ä¸ªå­—ç¬¦çš„æœ€ä½³æ ·æœ¬ï¼‰

---

## ğŸ”„ è¿­ä»£ä¼˜åŒ–ç­–ç•¥

### æ•°æ®é‡ä¸å‡†ç¡®ç‡

| è½®æ¬¡    | éªŒè¯æ ·æœ¬æ•° | æ¨¡å‹å‡†ç¡®ç‡ | äººå·¥éªŒè¯é‡ |
| ------- | ---------- | ---------- | ---------- |
| ç¬¬ 1 è½® | 500        | 95-96%     | ~300 æ ·æœ¬  |
| ç¬¬ 2 è½® | 1000       | 97-98%     | ~100 æ ·æœ¬  |
| ç¬¬ 3 è½® | 1500       | 98-99%     | ~30 æ ·æœ¬   |
| ç¬¬ 4 è½® | 2000       | > 99%      | ~10 æ ·æœ¬   |

### æ—¶é—´æŠ•å…¥

| æ­¥éª¤         | é¦–æ¬¡       | åç»­      |
| ------------ | ---------- | --------- |
| 1a. ç”Ÿæˆæ•°å­— | 5-10 åˆ†é’Ÿ  | -         |
| 1b. è‡ªåŠ¨æ ‡æ³¨ | 2-3 åˆ†é’Ÿ   | 2-3 åˆ†é’Ÿ  |
| 2. äººå·¥éªŒè¯  | 20-40 åˆ†é’Ÿ | 5-10 åˆ†é’Ÿ |
| 3. è®­ç»ƒæ¨¡å‹  | 5-10 åˆ†é’Ÿ  | 5-10 åˆ†é’Ÿ |
| 4. æ¨¡å‹æ ‡æ³¨  | 2-3 åˆ†é’Ÿ   | 2-3 åˆ†é’Ÿ  |

**æ€»æ—¶é—´**ï¼š

- ç¬¬ 1 è½®ï¼š~40 åˆ†é’Ÿ
- ç¬¬ 2 è½®ï¼š~20 åˆ†é’Ÿ
- ç¬¬ 3 è½®ï¼š~15 åˆ†é’Ÿ

---

## âš™ï¸ ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹

### åœ¨ä¸»ç¨‹åºä¸­ä½¿ç”¨

1. æ‰“å¼€ä¸»ç¨‹åº
2. è¿›å…¥ **èµ„æºç®¡ç†** é…ç½®
3. è®¾ç½® **HP/MP æ£€æµ‹æ¨¡å¼** ä¸º **æ–‡æœ¬ OCR**
4. åœ¨ **OCR å¼•æ“** ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©ï¼š
   - **æ¨¡æ¿åŒ¹é…ï¼ˆæ¨èï¼‰** - æœ€å¿«é€Ÿåº¦ï¼Œæ— é¢å¤–ä¾èµ–
   - **Keras æ¨¡å‹** - æœ€é«˜å‡†ç¡®ç‡ï¼Œéœ€è¦ TensorFlow
   - **Tesseract** - é€šç”¨æ€§å¼ºï¼Œéœ€è¦ Tesseract

### å¿«é€Ÿæµ‹è¯•

```python
from deepai import get_recognizer
import cv2

# ä½¿ç”¨æ¨¡æ¿åŒ¹é…ï¼ˆæ¨èï¼‰
recognizer = get_recognizer("template")

# è¯†åˆ«å•ä¸ªæ•°å­—
img = cv2.imread("path/to/digit.png", cv2.IMREAD_GRAYSCALE)
label, confidence = recognizer.recognize_digit(img)
print(f"è¯†åˆ«ç»“æœ: {label} (ç½®ä¿¡åº¦: {confidence:.1%})")

# è¯†åˆ«å®Œæ•´HP/MP
img = cv2.imread("path/to/hp_region.png")
current, maximum = recognizer.recognize_and_parse(img)
print(f"HP/MP: {current}/{maximum}")
```

### æ€§èƒ½å¯¹æ¯”

| å¼•æ“       | å‡†ç¡®ç‡  | é€Ÿåº¦   | å†…å­˜å ç”¨ | ä¾èµ–       |
| ---------- | ------- | ------ | -------- | ---------- |
| æ¨¡æ¿åŒ¹é…   | 90-95%  | ~7ms   | æä½     | æ—          |
| Keras æ¨¡å‹ | >99%    | ~47ms  | ä¸­ç­‰     | TensorFlow |
| Tesseract  | 95-100% | ~240ms | ä½       | Tesseract  |

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: TensorFlow å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ¡ˆ1ï¼šå®‰è£…ç‰¹å®šç‰ˆæœ¬
pip install tensorflow==2.15.0

# æ–¹æ¡ˆ2ï¼šä½¿ç”¨å›½å†…é•œåƒ
pip install tensorflow -i https://pypi.tuna.tsinghua.edu.cn/simple

# æ–¹æ¡ˆ3ï¼šå‡çº§pip
python -m pip install --upgrade pip
pip install tensorflow
```

### Q2: Seaborn æœªå®‰è£…

**é—®é¢˜**ï¼š

```
ModuleNotFoundError: No module named 'seaborn'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ¡ˆ1ï¼šå®‰è£…seabornï¼ˆæ¨èï¼‰
pip install seaborn

# æ–¹æ¡ˆ2ï¼šä¸å®‰è£…ï¼ˆè„šæœ¬ä¼šè‡ªåŠ¨ä½¿ç”¨matplotlibæ›¿ä»£ï¼‰
# æ— éœ€ä»»ä½•æ“ä½œï¼Œè„šæœ¬ä¼šæ­£å¸¸è¿è¡Œ
```

### Q3: pytesseract æ‰¾ä¸åˆ° tesseract

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. ä¸‹è½½å®‰è£… Tesseractï¼šhttps://github.com/UB-Mannheim/tesseract/wiki
2. é…ç½®è·¯å¾„ï¼ˆåœ¨ `deepai/config.py` ä¸­ï¼‰ï¼š
   ```python
   TESSERACT_CMD = r"D:\Program Files\Tesseract-OCR\tesseract.exe"
   ```

### Q4: éªŒè¯ç•Œé¢æ˜¯ç©ºç™½çš„

**æ£€æŸ¥æ¸…å•**ï¼š

1. æ˜¯å¦è¿è¡Œäº†æ•°æ®å‡†å¤‡è„šæœ¬ï¼Ÿ
   ```bash
   python deepai/scripts/01a_generate_digits.py
   python deepai/scripts/01b_auto_label.py
   ```
2. labels.json æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Ÿ
   ```bash
   dir deepai\data\labels.json
   ```
3. å›¾åƒæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Ÿ
   ```bash
   dir deepai\data\digits\
   ```

### Q5: å¦‚ä½•é…ç½®è§†é¢‘è·¯å¾„å’Œåæ ‡ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
ç¼–è¾‘ `deepai/config.py` æ–‡ä»¶ï¼š

```python
# æ¸¸æˆå½•åˆ¶è§†é¢‘è·¯å¾„
VIDEO_PATH = "deepai/data/raw/game_capture.mp4"

# HPåŒºåŸŸåæ ‡ (x1, y1, x2, y2)
HP_REGION = (97, 814, 228, 835)

# MPåŒºåŸŸåæ ‡ (x1, y1, x2, y2)
MP_REGION = (1767, 814, 1894, 835)
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
deepai/
â”œâ”€â”€ README.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ config.py                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ recognizer.py               # è¯†åˆ«å™¨å®ç°
â”œâ”€â”€ __init__.py                 # æ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ scripts/                    # è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ 00_iterative_labeling.py  # ä¸»æ§è„šæœ¬
â”‚   â”œâ”€â”€ 01_prepare_data.py        # å®Œæ•´æ•°æ®å‡†å¤‡ï¼ˆå·²å¼ƒç”¨ï¼‰
â”‚   â”œâ”€â”€ 01a_generate_digits.py    # ç”Ÿæˆæ•°å­—å›¾åƒ
â”‚   â”œâ”€â”€ 01b_auto_label.py         # è‡ªåŠ¨æ ‡æ³¨
â”‚   â”œâ”€â”€ 02_verify_labels.py       # äººå·¥éªŒè¯
â”‚   â”œâ”€â”€ 03_train_model.py         # è®­ç»ƒæ¨¡å‹
â”‚   â”œâ”€â”€ 04_evaluate_model.py      # è¯„ä¼°æ¨¡å‹
â”‚   â””â”€â”€ 06_generate_digit_templates.py  # ç”Ÿæˆæ¨¡æ¿
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/                    # åŸå§‹è§†é¢‘
â”‚   â”œâ”€â”€ processed/              # å¤„ç†åæ•°æ®
â”‚   â”‚   â”œâ”€â”€ frames/            # è§†é¢‘å¸§
â”‚   â”‚   â”œâ”€â”€ hp/                # HPåŒºåŸŸå›¾åƒ
â”‚   â”‚   â””â”€â”€ mp/                # MPåŒºåŸŸå›¾åƒ
â”‚   â”œâ”€â”€ digits/                # å•ä¸ªæ•°å­—å›¾åƒ
â”‚   â””â”€â”€ labels.json            # æ ‡æ³¨æ•°æ®
â”œâ”€â”€ models/                    # æ¨¡å‹ç›®å½•
â”‚   â”œâ”€â”€ digit_cnn.keras       # è®­ç»ƒå¥½çš„æ¨¡å‹
â”‚   â”œâ”€â”€ label_map.json        # æ ‡ç­¾æ˜ å°„
â”‚   â”œâ”€â”€ training_history.png  # è®­ç»ƒå†å²
â”‚   â”œâ”€â”€ confusion_matrix.png  # æ··æ·†çŸ©é˜µ
â”‚   â””â”€â”€ errors/               # é”™è¯¯åˆ†æ
â””â”€â”€ logs/                     # æ—¥å¿—ç›®å½•
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é¦–æ¬¡ä½¿ç”¨

```bash
# å®Œæ•´æµç¨‹
python deepai/scripts/00_iterative_labeling.py
# é€‰æ‹©: 1a â†’ 1b â†’ 2 â†’ 3 â†’ 5
```

**å»ºè®®**ï¼š

- éªŒè¯è‡³å°‘ 500 ä¸ªæ ·æœ¬
- ç¡®ä¿æ¯ä¸ªæ•°å­—ï¼ˆ0-9ï¼‰å’Œæ–œæ éƒ½æœ‰è¶³å¤Ÿæ ·æœ¬
- å…³æ³¨ä½ç½®ä¿¡åº¦æ ·æœ¬çš„éªŒè¯

### 2. è¿­ä»£ä¼˜åŒ–

```bash
# ä½¿ç”¨æ¨¡å‹åŠ é€Ÿ
python deepai/scripts/00_iterative_labeling.py
# é€‰æ‹©: 4 â†’ 2 â†’ 3 â†’ 5 â†’ (é‡å¤)
```

**å»ºè®®**ï¼š

- æ¯è½®åªéœ€éªŒè¯ä½ç½®ä¿¡åº¦æ ·æœ¬
- é€šå¸¸ < 100 ä¸ªæ ·æœ¬
- é‡å¤ 2-3 è½®è¾¾åˆ°æœ€ä½³æ•ˆæœ

### 3. æ•°æ®å¢å¼º

```bash
# å¦‚æœæ¨¡å‹å‡†ç¡®ç‡ä¸ç†æƒ³
python deepai/scripts/00_iterative_labeling.py
# é€‰æ‹©: 1a â†’ 1b â†’ 2 â†’ 3
```

**å»ºè®®**ï¼š

- å¢åŠ æ›´å¤šè§†é¢‘æ•°æ®
- è¦†ç›–æ›´å¤šåœºæ™¯å’Œæ•°å€¼
- ç¡®ä¿æ•°æ®å¤šæ ·æ€§

### 4. æœ€ç»ˆéªŒæ”¶

```bash
# ç”Ÿæˆæ¨¡å‹å’Œæ¨¡æ¿
python deepai/scripts/00_iterative_labeling.py
# é€‰æ‹©: 5 â†’ 6
```

**æ£€æŸ¥æ¸…å•**ï¼š

- âœ… å‡†ç¡®ç‡ â‰¥ 99%
- âœ… æ¨ç†é€Ÿåº¦ < 20ms
- âœ… é”™è¯¯æ ·æœ¬ < 20 ä¸ª
- âœ… æ‰€æœ‰ç±»åˆ«ç²¾ç¡®ç‡ > 95%

---

## ğŸ“Š é…ç½®å‚æ•°è¯´æ˜

### è§†é¢‘å’Œåæ ‡é…ç½®

åœ¨ `deepai/config.py` ä¸­é…ç½®ï¼š

```python
# æ¸¸æˆå½•åˆ¶è§†é¢‘è·¯å¾„
VIDEO_PATH = "deepai/data/raw/game_capture.mp4"

# HPåŒºåŸŸåæ ‡ (x1, y1, x2, y2)
HP_REGION = (97, 814, 228, 835)

# MPåŒºåŸŸåæ ‡ (x1, y1, x2, y2)
MP_REGION = (1767, 814, 1894, 835)
```

### æ•°æ®å‡†å¤‡é…ç½®

```python
# å¸§æå–é—´éš”ï¼ˆæ¯Nå¸§æå–ä¸€æ¬¡ï¼‰
FRAME_SAMPLE_INTERVAL = 15

# HP/MPé‡‡æ ·ç‡é…ç½®
HP_SAMPLE_RATIO = 0.1  # HPåŒºåŸŸé‡‡æ ·ç‡ï¼š10%
MP_SAMPLE_RATIO = 1.0  # MPåŒºåŸŸé‡‡æ ·ç‡ï¼š100%

# å•ä¸ªæ•°å­—æœ€å°å°ºå¯¸ï¼ˆè¿‡æ»¤å™ªç‚¹ï¼‰
MIN_DIGIT_WIDTH = 6
MIN_DIGIT_HEIGHT = 10
```

### OCR è‡ªåŠ¨æ ‡æ³¨é…ç½®

```python
# Tesseractå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
TESSERACT_CMD = r"D:\Program Files\Tesseract-OCR\tesseract.exe"

# Tesseracté…ç½®ï¼ˆç™½åå•ä¸åŒ…å«é€—å·ï¼‰
TESSERACT_CONFIG = '--psm 7 -c tessedit_char_whitelist=0123456789/'

# è‡ªåŠ¨æ ‡æ³¨ç½®ä¿¡åº¦é˜ˆå€¼
AUTO_LABEL_CONFIDENCE = 0.9
```

### æ¨¡å‹è®­ç»ƒé…ç½®

```python
# è®­ç»ƒå‚æ•°
BATCH_SIZE = 32
EPOCHS = 20
LEARNING_RATE = 0.001
VALIDATION_SPLIT = 0.2

# è®¾å¤‡é…ç½®
USE_GPU = False  # CPUè®­ç»ƒå®Œå…¨è¶³å¤Ÿ

# å›¾åƒå°ºå¯¸
IMG_WIDTH = 28
IMG_HEIGHT = 28

# ç±»åˆ«æ•°é‡ï¼ˆ0-9 + /ï¼‰
NUM_CLASSES = 11
```

---

## âœ… æ€»ç»“

### æ ¸å¿ƒä¼˜åŠ¿

1. **ä¸‰ç§å¼•æ“** - æ»¡è¶³ä¸åŒæ€§èƒ½éœ€æ±‚
2. **è¿­ä»£è®­ç»ƒ** - é€æ­¥æå‡å‡†ç¡®ç‡
3. **æ™ºèƒ½é‡‡æ ·** - HP/MP åŒºåŸŸå·®å¼‚åŒ–å¤„ç†
4. **è‡ªåŠ¨åŒ–** - é«˜ç½®ä¿¡åº¦æ ·æœ¬è‡ªåŠ¨é€šè¿‡
5. **å¯è§†åŒ–** - å®Œæ•´çš„è¯„ä¼°å’Œåˆ†æ

### é¢„æœŸæ•ˆæœ

- **æ€»æ—¶é—´**ï¼š~1.5 å°æ—¶
- **æœ€ç»ˆå‡†ç¡®ç‡**ï¼š> 99%
- **è¯†åˆ«é€Ÿåº¦**ï¼š< 25ms
- **è®­ç»ƒæ ·æœ¬**ï¼š1500-2000+

### ä½¿ç”¨å»ºè®®

**æ ¹æ®éœ€æ±‚é€‰æ‹©å¼•æ“**ï¼š

- **æ¨èé¦–é€‰** â†’ æ¨¡æ¿åŒ¹é…ï¼ˆæœ€å¿«ï¼Œæ— é¢å¤–ä¾èµ–ï¼‰
- è¿½æ±‚å‡†ç¡®ç‡ â†’ Keras æ¨¡å‹ï¼ˆéœ€è¦ TensorFlowï¼‰
- æ— éœ€è®­ç»ƒ â†’ Tesseract OCRï¼ˆéœ€è¦ Tesseractï¼‰

**å¼€å§‹ä½ çš„ DeepAI è®­ç»ƒä¹‹æ—…å§ï¼** ğŸš€
